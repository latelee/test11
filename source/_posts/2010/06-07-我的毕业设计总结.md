---
title: 我的毕业设计总结
tags:
  - 大学印记
categories:
  - 大学印记
date: 2010-06-07
---

李迟按：这是以前写的文章，现迁移到博客中备份。  

在这篇文章中，小笑想表达的是，他大四下学期没有虚度时日，他付出了很多，学了很多，别人虽然看不到，但却实实在在存在过。他问心无愧。他没有后悔自己的选择，他坚信自己的道路是正确的。此外，也不想让谁谁在文章下面留言，说小笑是牛人、强人之类的。——恭维的话对小笑是没有用的。

<!-- more -->

这个毕业设计从选定题目到答辩，共跨越整整一个假期和差不多一个学期，时间不可谓不长。只是那时为考研复习而没有开始动工而已(大三下学期快结束前几周就要选题目了，学院规定的)。其实要说动工，很久我就开始了，我大三下学期开始时就想做视频方面的东西了，这个东西很火，我们专业许多人的毕设内容就是它，在Windows下的，在Linux下的，在开发板上的，等等。但是我没有料想到的是，我的这个毕设真的很难做。我不知是不是我在钻牛角尖还是别的什么原因，反正花费我很多时间。我估计是我的性格造成的。有些人写程序，如果别人的代码能直接使用的话，就会直接拿来用，连代码风格都没有改变，让人一看就知道不是你的东西。这次我也使用人家的代码，不过两个都是开源的代码，因此，我的代码也是开源的(将来会公布出来的)。我研究过luvcview的代码，我的上下位机就是以它为底来编写的，在动手之前，我都看了很多回代码了。——我的一个习惯，是将代码当作小说，放到手机里看，没事就会看代码。至于使用“研究”一词，看一下绝影的《疯狂的程序员》便知了。

寒假在家过年，我也不轻松，我完成了五六篇外文翻译，那些文章是直接从IBM网站的developerworks上复制的。翻译时没有Google，只有金山词霸，等我翻译完后，来到学校才知道人家已经有了中文翻译(developerworks有中文版块)了。后来对照人家的翻译，修改了一些地方，但是某些译法，我坚持了自己的见解。毕业设计中要完成的外文翻译是4万字符以上的文章，有些人直接用Google来翻译，所以很短时间内可以完成，我呢，我是到了5月初才完成三篇文章的翻译！我没有拿在家翻译的文章作为翻译的作业，因为在我看来，翻译，它不是作业，它是一种技能的锻炼。我翻译的文章是有针对性的，比如说，Linux内核启动过程剖析，Linux内核发展，initrd剖析，BusyBox剖析，网络栈剖析，文件系统剖析，等等(这些名词我很熟，因为是我亲手翻译的)。即使这些没有上交，即使没有翻译这道作业，我万一遇到了，也会翻译的。云风(一个很牛的人，我看过他写的书)就很支持这种做法，他翻译了大量专业外文后，发现自己的英语水平大大提高了，竟也通过了CET-4考试！其实，我也发现我的英语水平大大提高了，呵呵。(木木曰：此人大一的英语水平就不低。)

在家还有一件重要的事，就是做LFS，为此我通宵过一次，让老妈心疼不已，——为这件事，她跟我唠叨了几天了。来到学校后，我逢人就说自己做了个Linux系统，准备做一个有界面的系统。如今看来，这又是一个愿望了。

我没有带我的电脑来学校，我不知这是不是一个错误的决定。这也造成我必须到指导老师的实验室(其实是他跟另一个老师开的公司，我没有这样说，因为我不想让人以为我找到工作了，正在实习)去做毕业设计。4月份，我差不多一个月没有去那边，没想到一去，就被另一个老师训话了，说什么办事效率，时间观念等等一大堆道理。许多人以为在宿舍办事效率就一定低，我看不尽然，心定，效率自然高。我晚上停电后可以在厕所里看半小时的书，宿舍里的人怎么也想不通，但我就能这样做，因为我人已在书中，不在厕所。(木木曰：难道这也是小笑与众人不同的一方面？)

这是让我不爽的一件事。但我必须感谢指导老师提供的实验室。我在那里构建了一个小小的局域网，我写的代码通过CVS来管理，每台电脑都可以把代码checkout出来。尝到了CVS的强大之处，我也逢人便鼓吹版本控制，只是没有几个人能跟我产生共鸣。倒是有一个，我们以前的某一任班长，他公司里使用SVN管理的，那一次，我跟他聊了很久，从版本控制，到代码编写，到程序员的幽默，等等。此时我才发现，找到一个能跟自己谈话的人是一件多么喜悦的事情啊！虽然那些具有历史意义的谈话是在玩极品飞车过程中进行的，但并不影响它的意义。他便是领我入Linux大门的流氓同学，也叫sky.ljp，如今已签到了ZLG，他肯定会有一个美好的前程的。

我选那个毕设题目，是因为它涉及到嵌入式，而我，特想找一个嵌入式的题目来做。我找的第一个指导老师，是想让我用FPGA来做一个SD卡的读卡器，后来我拒绝了。因此这个题目显示不出我所学的东西，如果这样，还不如做个网站来得更方便、更容易做。之后，我才找现在的指导老师，可惜，他对嵌入式研究不深，没有给我在技术上提供直接的帮助，但我还是要感谢他的。我移植过一次内核，那些纯粹是个人爱好，没有任何目的。这次的移植，更深入一些，至少对Linux的某些机制还是有点了解的。由于有以前的经验，从下载源代码到成功启动Linux系统，所花时间不多。真正瓶颈之处，是接下来的设备驱动和视频采集，在Windows下，有VFW，很强大，可惜我是在Linux平台的，网络上流行的Linux下视频采集系统，都是很经典的，比如，摄像头芯片是中星徽电子的ZC301，驱动是gspca，采集使用V4L，等等。那种芯片的摄像头现在已经很难找到了，而gspca驱动已经纳入了内核中了，V4L倒是可以使用，但我没有使用。新的USB视频设备驱动是UVC，——其实它也不新，N年前就有了，只是现在没多少人使用，故显得“新”。摄像头驱动好容易解决了，又出现了视频格式了，什么RGB、YUV、MPEG、MJPEG等等，一古脑全来了，RGB又分X种，YUV也分X种。就像我当初复习数据结构的排序算法一样，一下子什么排序都来了，我还特意在纸上写出每种算法的一趟的排序过程，以为懂了，可如今呢，就知道冒泡排序是有两个for循环了，其它什么都忘了。唉，这是一下学很多既相似，又不同的东西的后果。(Little Crab评曰：此人学的东西老多了。)

我没有去实验室的那一个月，是在LG的电脑测试摄像头，那时测得的数据格式是YUYV，我还特意跑到LC那里请教这方面的知识，一共跑了三次，每次都受益匪浅，比如了解FFMPEG，了解一点YUV，可惜，那些知识没能用在毕设中。那个时候，我看了Xvid的代码，使用过FFMPEG的命令行采集数据，编写了在PC机上能显示图像的程序，所以我并没有偷闲，而是继续学习。

但是，又一件让我郁闷的事情，我通过NFS在开发板上测试我的摄像头，得到的格式是MJPEG的！我足足让我郁闷了几天。我一下子不知怎么办，因为YUV和MPEG都用不着了！这不仅是论文字数的损失，更是浪费我先前的时间啊！早知如此，我就先在开发板上测试，得到数据格式再做决定了。唉，经验不足，造成特大损失。

事已至此，只好改方案了。来一招狠的，MJPEG本来就已经压缩过的，我直接通过网络传输，任务完成，我才不管当初开题报告是怎么写的！

网络部分也让我头疼，我试过直接自己使用UDP传输，但传了几帧数据后，就出来问题，有一次是glibc直接中断程序的运行，提示的信息我也看不懂，另外一次是内核中断程序运行，提示信息更看不懂(这些提示信息就不贴出来了，但我日后会研究出错原因的)。对于前者，指导老师的意见是指针指到了缓冲区外边了，而后者，他的意见是叫我重新移植一个新的内核。网络上都说用RTP传输好，但也没给出个具体实例了，有实例都是分析人家的代码。我不敢用jrtplib，怕到时出问题，我一开始想用C++来写程序，也是考虑到可能会使用到jrtplib，但最终还是没有使用。而是使用同学下载的一个使用C语言写的RTP实现库，是法国人写的。我将它稍做修改，用到了毕设中来。

还有一个问题，也是致命的。当初跟老师选题时，是有另外一个人的，我做监控系统下位机，他负责上位机。如今我不知他怎么样了，反正我必须完成我负责的那部分。但是，我做的是没有界面显示图像的，老师们不会相信，一运行程序就采集到图像，所以要做一个上位机来显示。我不知答辩那时会是个什么样子，也不知老师们会不会看到我的努力。但我，真的努力过了。

