---
title: 2015第51周周记：“不爽就走人”
url: 506.html
id: 506
categories:
  - 工作
date: 2015-12-20 17:10:26
tags:
---

本周主要是做live555，包括：学习live555代码架构，了解RTSP协议，尝试在公司架构中同时添加单播和组播。 
<!-- more --> 
为了学习live555，自己在家里也练习，把代码放到github上。在工程自带的播放文件例子中添加单播，实现了同时具备两种方式。自以为很简单，后来向之前做live555的同事了解，发现有很多问题没解决，使用组播，设备启动后就要开始play，对网络有一定影响，这点可能要修改。组播的参数没有向用户开放，还有和onvif如果通信，总之有一堆问题。 

之前部门已经安排有人搞live555，大中心部门有组播需求，就搞了，但后来又不用了，于是就把组播功能给关闭。后来的修改就没考虑过组播的情况——因为我测试发现只要开组播，设备必挂无疑，而用单播一切安好。我一直以为是我新加代码有问题，试了好久，甚至还原到最初版本，始终有问题。由于嵌入式环境限制，生成coredump也麻烦。Makefile只有-O2选项，以为改为-g就OK，结果在某个子Makefile中做了strip，又找半天。终于生成coredump了，用gdb调试发现在某个函数中有段错误——我们公司的无故复位问题，有一半是段错误。这个问题是因为没有判断指针，代码风格也不是很好，错误语句形式为aaa=foo()->bar()->name。我十分反感这类写法。但我无权说什么，只能认倒霉。是啊，人家运行从没错误，偏偏我一跑就出问题。说到这，又想起代码警告的事。10月份改警告时，老大说live555和onvif已经有人在重构，我暂时不用改，但至今还没见重构，又安排我接触这两块。总之，是我的事就始终逃不掉。但因为别人的坑浪费我时间，我觉得不值。

周五例会，老大讲了很多，不点名地批评我和王工——因为他所举的例子，正是我们俩的事。我是因为前几周网线bug的事，我想了解一下外面实际的问题，无视公司层面已经做了的决策，多嘴说了一些不该说的话，让领导感觉我怕错误，一开始就想到错误，而不是往对的方向想。而王工是因为和其它部门扯皮，虽然事实上胜利了，但还是被批评。某个大模块，包含上位机模块、中间接口模块和算法控制模块，他负责中间接口。出问题了，扯皮很久，都扯到大领导那里了，最后水落石出，协议设计是一方面，控制模块负责人有些细节没留意是另一方面。但最后全是王工的错。抛开别的部门水平问题，领导认为他的沟通能力不够。后来我们哥几个人甚至使用“抛开……”来造句了。 
 
由这些事引出关于工作方式、工作态度，后来老大抛出话：干不爽就走人。当时我正在看对面墙上的中国地图，王工好像在玩他的iphone。至于其它人，我倒没留意。 
 
这段时间，我们三个搞底层的底层人员情绪波动比较大，不像其它的同事安静干活，有任务就接，也不问什么。我不同，有些事，我要知道原由。后来我得知，老大找王工谈话，有个关键细节：“不要影响明年3月份”。这下我要老实听公司安排了。

细细想来，其实也不该如此。我还是太率性了。 

周六看《寻龙诀》，虽然剧情一般，但效果不错，40块的IMAX，值了。 

李迟 2015.12.20 周日